# å¤ç›˜é¡¹ç›®å…è´¹éƒ¨ç½²æ–¹æ¡ˆ

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªPythonè‚¡ç¥¨åˆ†æå·¥å…·,ä¸»è¦ç”¨äºç”Ÿæˆæ¯æ—¥åˆ†ææŠ¥å‘Šã€‚ä»¥ä¸‹æ˜¯å‡ ç§å…è´¹éƒ¨ç½²æ–¹æ¡ˆ:

## æ–¹æ¡ˆä¸€:GitHub Pages + GitHub Actions(æ¨è)

### ä¼˜åŠ¿
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨åŒ–æ‰§è¡Œ
- âœ… ç‰ˆæœ¬æ§åˆ¶
- âœ… æ”¯æŒå®šæ—¶ä»»åŠ¡
- âœ… å¯ä»¥å±•ç¤ºç”Ÿæˆçš„MarkdownæŠ¥å‘Š

### éƒ¨ç½²æ­¥éª¤

#### 1. å‡†å¤‡GitHubä»“åº“
```bash
# å¦‚æœè¿˜æ²¡æœ‰æ¨é€åˆ°GitHub,å…ˆåˆ›å»ºä»“åº“å¹¶æ¨é€
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/fupan.git
git push -u origin main
```

#### 2. åˆ›å»ºGitHub Actionså·¥ä½œæµ
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.github/workflows/daily-report.yml`:

```yaml
name: ç”Ÿæˆæ¯æ—¥åˆ†ææŠ¥å‘Š

on:
  schedule:
    # æ¯ä¸ªäº¤æ˜“æ—¥ä¸‹åˆ4ç‚¹æ‰§è¡Œ(åŒ—äº¬æ—¶é—´16:00 = UTC 08:00)
    - cron: '0 8 * * 1-5'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  generate-report:
    runs-on: ubuntu-latest
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v3
      
    - name: è®¾ç½®Pythonç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: å®‰è£…uv
      run: |
        curl -LsSf https://astral.sh/uv/install.sh | sh
        echo "$HOME/.cargo/bin" >> $GITHUB_PATH
        
    - name: å®‰è£…ä¾èµ–
      run: |
        uv sync
        
    - name: ç”Ÿæˆå½“æ—¥æŠ¥å‘Š
      run: |
        DATE=$(date +%Y%m%d)
        uv run python -m fupan --date $DATE
        
    - name: æäº¤æŠ¥å‘Š
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add reports/
        git add data/
        git commit -m "è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š $(date +%Y%m%d)" || echo "æ²¡æœ‰å˜æ›´"
        git push
        
    - name: éƒ¨ç½²åˆ°GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./reports
        publish_branch: gh-pages
```

#### 3. å¯ç”¨GitHub Pages
1. è¿›å…¥ä»“åº“çš„ Settings â†’ Pages
2. Source é€‰æ‹© `gh-pages` åˆ†æ”¯
3. ä¿å­˜åå³å¯é€šè¿‡ `https://ä½ çš„ç”¨æˆ·å.github.io/fupan/` è®¿é—®æŠ¥å‘Š

#### 4. é…ç½®æŒä»“æ–‡ä»¶
å°† `æŒä»“è‚¡ç¥¨.csv` æ·»åŠ åˆ°ä»“åº“ä¸­,æˆ–é€šè¿‡GitHub Secretsé…ç½®æ•æ„Ÿä¿¡æ¯ã€‚

---

## æ–¹æ¡ˆäºŒ:Verceléƒ¨ç½²(é€‚åˆWebç•Œé¢)

### ä¼˜åŠ¿
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… å…¨çƒCDNåŠ é€Ÿ
- âœ… æ”¯æŒServerlesså‡½æ•°

### éƒ¨ç½²æ­¥éª¤

#### 1. åˆ›å»ºWebç•Œé¢
åˆ›å»º `web/index.html`:

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‚¡ç¥¨å¤ç›˜åˆ†æç³»ç»Ÿ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #667eea;
            margin-bottom: 30px;
        }
        .report-list {
            list-style: none;
            padding: 0;
        }
        .report-item {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
            transition: transform 0.2s;
        }
        .report-item:hover {
            transform: translateX(5px);
            background: #e9ecef;
        }
        .report-link {
            text-decoration: none;
            color: #667eea;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š è‚¡ç¥¨å¤ç›˜åˆ†æç³»ç»Ÿ</h1>
        <div id="reports"></div>
    </div>
    
    <script>
        // åŠ¨æ€åŠ è½½æŠ¥å‘Šåˆ—è¡¨
        fetch('/api/reports')
            .then(res => res.json())
            .then(data => {
                const container = document.getElementById('reports');
                const list = document.createElement('ul');
                list.className = 'report-list';
                
                data.reports.forEach(report => {
                    const item = document.createElement('li');
                    item.className = 'report-item';
                    item.innerHTML = `<a class="report-link" href="/reports/${report}">${report}</a>`;
                    list.appendChild(item);
                });
                
                container.appendChild(list);
            });
    </script>
</body>
</html>
```

#### 2. åˆ›å»ºVercelé…ç½®
åˆ›å»º `vercel.json`:

```json
{
  "version": 2,
  "builds": [
    {
      "src": "web/index.html",
      "use": "@vercel/static"
    },
    {
      "src": "api/*.py",
      "use": "@vercel/python"
    }
  ],
  "routes": [
    {
      "src": "/",
      "dest": "/web/index.html"
    },
    {
      "src": "/api/(.*)",
      "dest": "/api/$1.py"
    },
    {
      "src": "/reports/(.*)",
      "dest": "/reports/$1"
    }
  ]
}
```

#### 3. åˆ›å»ºAPIç«¯ç‚¹
åˆ›å»º `api/reports.py`:

```python
import os
import json
from http.server import BaseHTTPRequestHandler

class handler(BaseHTTPRequestHandler):
    def do_GET(self):
        reports_dir = os.path.join(os.path.dirname(__file__), '..', 'reports')
        reports = []
        
        if os.path.exists(reports_dir):
            reports = [f for f in os.listdir(reports_dir) if f.endswith('.md')]
            reports.sort(reverse=True)
        
        self.send_response(200)
        self.send_header('Content-type', 'application/json')
        self.end_headers()
        self.wfile.write(json.dumps({'reports': reports}).encode())
```

#### 4. éƒ¨ç½²åˆ°Vercel
```bash
# å®‰è£…Vercel CLI
npm install -g vercel

# ç™»å½•å¹¶éƒ¨ç½²
vercel login
vercel --prod
```

---

## æ–¹æ¡ˆä¸‰:PythonAnywhere(é€‚åˆå®šæ—¶ä»»åŠ¡)

### ä¼˜åŠ¿
- âœ… å…è´¹å¥—é¤
- âœ… åŸç”ŸPythonç¯å¢ƒ
- âœ… æ”¯æŒå®šæ—¶ä»»åŠ¡
- âœ… æ— éœ€å®¹å™¨åŒ–

### éƒ¨ç½²æ­¥éª¤

#### 1. æ³¨å†ŒPythonAnywhere
è®¿é—® https://www.pythonanywhere.com/ æ³¨å†Œå…è´¹è´¦æˆ·

#### 2. ä¸Šä¼ ä»£ç 
```bash
# åœ¨PythonAnywhereçš„Bashæ§åˆ¶å°ä¸­
git clone https://github.com/ä½ çš„ç”¨æˆ·å/fupan.git
cd fupan
pip install --user -r requirements.txt
```

#### 3. è®¾ç½®å®šæ—¶ä»»åŠ¡
åœ¨PythonAnywhereçš„Tasksæ ‡ç­¾é¡µä¸­æ·»åŠ :
```bash
cd ~/fupan && python -m fupan --date $(date +%Y%m%d)
```
è®¾ç½®ä¸ºæ¯å¤©16:00æ‰§è¡Œ

#### 4. åˆ›å»ºWebåº”ç”¨
åœ¨Webæ ‡ç­¾é¡µåˆ›å»ºFlaskåº”ç”¨æ¥å±•ç¤ºæŠ¥å‘Š

---

## æ–¹æ¡ˆå››:Render.com(æ¨èç”¨äºåå°æœåŠ¡)

### ä¼˜åŠ¿
- âœ… å…è´¹å¥—é¤
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… æ”¯æŒCron Jobs
- âœ… åŸç”ŸDockeræ”¯æŒ

### éƒ¨ç½²æ­¥éª¤

#### 1. åˆ›å»ºDockerfile
```dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…uv
RUN pip install uv

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
COPY . .

# å®‰è£…ä¾èµ–
RUN uv sync

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONUNBUFFERED=1

# è¿è¡Œè„šæœ¬
CMD ["uv", "run", "python", "-m", "fupan", "--date", "$(date +%Y%m%d)"]
```

#### 2. åˆ›å»ºrender.yaml
```yaml
services:
  - type: web
    name: fupan-web
    env: python
    buildCommand: "pip install uv && uv sync"
    startCommand: "python -m http.server 8000 --directory reports"
    
  - type: cron
    name: fupan-daily
    env: python
    schedule: "0 8 * * 1-5"
    buildCommand: "pip install uv && uv sync"
    startCommand: "uv run python -m fupan --date $(date +%Y%m%d)"
```

#### 3. éƒ¨ç½²
1. è®¿é—® https://render.com/
2. è¿æ¥GitHubä»“åº“
3. è‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²

---

## æ–¹æ¡ˆäº”:Railway.app

### ä¼˜åŠ¿
- âœ… æ¯æœˆ$5å…è´¹é¢åº¦
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… æ”¯æŒå®šæ—¶ä»»åŠ¡
- âœ… ç®€å•æ˜“ç”¨

### éƒ¨ç½²æ­¥éª¤

#### 1. åˆ›å»ºrailway.json
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "uv run python -m fupan --date $(date +%Y%m%d)",
    "restartPolicyType": "ON_FAILURE"
  }
}
```

#### 2. éƒ¨ç½²
1. è®¿é—® https://railway.app/
2. ä½¿ç”¨GitHubç™»å½•
3. é€‰æ‹©ä»“åº“å¹¶éƒ¨ç½²

---

## æ¨èæ–¹æ¡ˆæ€»ç»“

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | å…è´¹é¢åº¦ | éš¾åº¦ |
|------|---------|---------|------|
| **GitHub Pages + Actions** | å®šæ—¶ç”ŸæˆæŠ¥å‘Šå¹¶å±•ç¤º | æ— é™åˆ¶ | â­â­ |
| **Vercel** | éœ€è¦Webç•Œé¢ | 100GBå¸¦å®½/æœˆ | â­â­â­ |
| **PythonAnywhere** | ç®€å•å®šæ—¶ä»»åŠ¡ | 1ä¸ªä»»åŠ¡ | â­ |
| **Render.com** | å®Œæ•´åå°æœåŠ¡ | 750å°æ—¶/æœˆ | â­â­â­ |
| **Railway.app** | å¿«é€Ÿéƒ¨ç½² | $5/æœˆ | â­â­ |

## æœ€ä½³å®è·µå»ºè®®

### 1. æ•°æ®æŒä¹…åŒ–
æ‰€æœ‰æ–¹æ¡ˆéƒ½éœ€è¦è€ƒè™‘æ•°æ®å­˜å‚¨:
- ä½¿ç”¨Gitæäº¤ä¿å­˜å†å²æ•°æ®
- æˆ–ä½¿ç”¨å…è´¹æ•°æ®åº“æœåŠ¡(å¦‚Supabaseã€MongoDB Atlas)

### 2. æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨APIå¯†é’¥
- ä¸è¦å°† `æŒä»“è‚¡ç¥¨.csv` æäº¤åˆ°å…¬å¼€ä»“åº“
- ä½¿ç”¨GitHub Secretsæˆ–å¹³å°çš„ç¯å¢ƒå˜é‡åŠŸèƒ½

### 3. å®šæ—¶ä»»åŠ¡ä¼˜åŒ–
- é¿å¼€å¸‚åœºé«˜å³°æœŸ(å¦‚å¼€ç›˜æ—¶é—´)
- è®¾ç½®é‡è¯•æœºåˆ¶
- æ·»åŠ é”™è¯¯é€šçŸ¥(é‚®ä»¶/Webhook)

### 4. æˆæœ¬æ§åˆ¶
- ç›‘æ§å…è´¹é¢åº¦ä½¿ç”¨æƒ…å†µ
- ä¼˜åŒ–æŸ¥è¯¢é¢‘ç‡
- ä½¿ç”¨ç¼“å­˜å‡å°‘APIè°ƒç”¨

## ä¸‹ä¸€æ­¥æ“ä½œ

é€‰æ‹©ä¸€ä¸ªæ–¹æ¡ˆå,æˆ‘å¯ä»¥å¸®æ‚¨:
1. åˆ›å»ºæ‰€éœ€çš„é…ç½®æ–‡ä»¶
2. è®¾ç½®GitHub Actionså·¥ä½œæµ
3. åˆ›å»ºWebå±•ç¤ºç•Œé¢
4. é…ç½®ç¯å¢ƒå˜é‡å’Œå¯†é’¥

è¯·å‘Šè¯‰æˆ‘æ‚¨å€¾å‘äºå“ªä¸ªæ–¹æ¡ˆ,æˆ‘å°†ä¸ºæ‚¨æä¾›è¯¦ç»†çš„å®æ–½æŒ‡å¯¼!
